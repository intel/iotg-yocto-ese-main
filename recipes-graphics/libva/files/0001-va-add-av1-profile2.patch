From 8053d6e7e3fa8ae2d1aa1399c9c348c2d37cc5ce Mon Sep 17 00:00:00 2001
From: "David (Ming Qiang) Wu" <David.Wu3@amd.com>
Date: Wed, 17 Jul 2024 13:51:11 -0400
Subject: [PATCH 1/2] va: add av1 profile2

Adding VAProfileAV1Profile2 to support 12bit AV1 decoding

Upstream-Status: Backport [https://github.com/intel/libva/commit/01153523f25ac703e7ce2afc0023788a90f6c1bb]

Signed-off-by: David (Ming Qiang) Wu <David.Wu3@amd.com>
---
 va/va.h       | 3 ++-
 va/va_str.c   | 1 +
 va/va_trace.c | 1 +
 3 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/va/va.h b/va/va.h
index 1d99fa6..75749c6 100644
--- a/va/va.h
+++ b/va/va.h
@@ -541,7 +541,8 @@ typedef enum {
     VAProfileProtected                  = 35,
     VAProfileH264High10                 = 36,
     VAProfileVVCMain10                  = 37,
-    VAProfileVVCMultilayerMain10        = 38
+    VAProfileVVCMultilayerMain10        = 38,
+    VAProfileAV1Profile2                = 39
 } VAProfile;
 
 /**
diff --git a/va/va_str.c b/va/va_str.c
index 9d651d0..0f9c1c1 100644
--- a/va/va_str.c
+++ b/va/va_str.c
@@ -64,6 +64,7 @@ const char *vaProfileStr(VAProfile profile)
         TOSTR(VAProfileHEVCSccMain444);
         TOSTR(VAProfileAV1Profile0);
         TOSTR(VAProfileAV1Profile1);
+        TOSTR(VAProfileAV1Profile2);
         TOSTR(VAProfileHEVCSccMain444_10);
         TOSTR(VAProfileProtected);
         TOSTR(VAProfileVVCMain10);
diff --git a/va/va_trace.c b/va/va_trace.c
index 8993d62..6145f81 100644
--- a/va/va_trace.c
+++ b/va/va_trace.c
@@ -6775,6 +6775,7 @@ void va_TraceRenderPicture(
             break;
         case VAProfileAV1Profile0:
         case VAProfileAV1Profile1:
+        case VAProfileAV1Profile2:
             for (j = 0; j < num_elements; j++) {
                 va_TraceMsg(trace_ctx, "\telement[%d] = \n", j);
 
-- 
2.43.0

