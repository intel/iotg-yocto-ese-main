From 658cf9d9ab9c38d1a89be211fa8ac843569dc931 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?V=C3=ADctor=20Manuel=20J=C3=A1quez=20Leal?=
 <vjaquez@igalia.com>
Date: Mon, 2 Sep 2024 13:17:01 +0200
Subject: [PATCH 083/117] vasurfaceimage: log surface status string

Part-of: <https://gitlab.freedesktop.org/gstreamer/gstreamer/-/merge_requests/6022>
---
 gst-libs/gst/va/vasurfaceimage.c | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

diff --git a/gst-libs/gst/va/vasurfaceimage.c b/gst-libs/gst/va/vasurfaceimage.c
index 6b29868d6..326e6377d 100644
--- a/gst-libs/gst/va/vasurfaceimage.c
+++ b/gst-libs/gst/va/vasurfaceimage.c
@@ -372,6 +372,15 @@ va_check_surface (GstVaDisplay * display, VASurfaceID surface)
   return va_check_surface_has_status (display, surface, 0);
 }
 
+#ifndef GST_DISABLE_GST_DEBUG
+static const char *surface_status_str_map[] = {
+  [VASurfaceRendering] = "rendering",
+  [VASurfaceDisplaying] = "displaying",
+  [VASurfaceReady] = "ready",
+  [VASurfaceSkipped] = "skipped"
+};
+#endif
+
 gboolean
 va_check_surface_has_status (GstVaDisplay * display, VASurfaceID surface,
     VASurfaceStatus surface_status)
@@ -387,7 +396,7 @@ va_check_surface_has_status (GstVaDisplay * display, VASurfaceID surface,
     return FALSE;
   }
 
-  GST_LOG ("surface %#x status %d", surface, state);
+  GST_LOG ("surface %#x status: %s", surface, surface_status_str_map[state]);
 
   /* Just query the surface, no flag to compare, we succeed. */
   if (!surface_status)
-- 
2.43.0

